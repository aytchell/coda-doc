
<!doctype linuxdoc system>

<manpage TITLE="" SECTNUM=3>
<sect1>NAME 
 <P> - map recoverable storage

")
@ToC(Contents="rds&lowbar;load&lowbar;heap")
@IndexEntry(Key="rds&lowbar;load&lowbar;heap",Entry="rds&lowbar;load&lowbar;heap, function",Number)
@Index2ndary(Key1="Functions",Text1="Functions",
    	Key2="rds&lowbar;load&lowbar;heap",Text2="rds&lowbar;load&lowbar;heap")
@ToC(Contents="rds&lowbar;start&lowbar;heap")
@IndexEntry(Key="rds&lowbar;start&lowbar;heap",Entry="rds&lowbar;start&lowbar;heap, function",Number)
@Index2ndary(Key1="Functions",Text1="Functions",
    	Key2="rds&lowbar;start&lowbar;heap",Text2="rds&lowbar;start&lowbar;heap")

<sect1>Synopsis
<tt>#include "rds.h"</tt>

<tt>int rds&lowbar;load&lowbar;heap (DevName, DevLength, staticAddr, err)</tt>
@Opt3(Name="<tt>char</tt>",Desc="<tt>*DevName</tt>",
	Expl="name of heap segment")
@Opt3(Name="<tt>rvm&lowbar;length&lowbar;t</tt>",Desc="<tt>DevLength</tt>",
	Expl="length of heap raw partition")
@Opt3(Name="<tt>char</tt>",Desc="<tt>**staticAddr</tt>",
	Expl="address of static region &lsqb;out&rsqb;")
@Opt3(Name="<tt>int</tt>",Desc="*err",
	Expl="pointer to error return location")

<tt>int rds&lowbar;start&lowbar;heap (staticAddr, err)</tt>
@Opt3(Name="<tt>char</tt>",Desc="<tt>**staticAddr</tt>",
	Expl="address of static region")
@Opt3(Name="<tt>int</tt>",Desc="*err",
	Expl="pointer to error return location")


<sect1>Description<P>
<tt>rds&lowbar;load&lowbar;heap</tt> provides a convenient method of mapping the heap
segment and initializing RDS.  The name of the file or partition
containing the recoverable heap is specified by <tt>DevName</tt>, and the
length of the partition is specified in <tt>DevLength</tt>.  If the heap 
is in a file, <tt>DevLength</tt> should be zero.

<tt>rds&lowbar;load&lowbar;heap</tt> calls <tt>rvm&lowbar;load&lowbar;segment</tt> to map the heap.  This
requires that the heap file or partition be created with
<tt>rds&lowbar;zap&lowbar;heap</tt> or <tt>rvm&lowbar;create&lowbar;segment</tt>, which is most conveniently
done with the <tt>rdsinit</tt> utility.
After the heap is mapped, the address of the static region is returned
in <tt>staticAddr</tt>.  <tt>rds&lowbar;start&lowbar;heap</tt> is automatically called to
initialize RDS.

If the actual mapping of the heap and static regions is done by the
application, <tt>rds&lowbar;start&lowbar;heap</tt> should be used to initialize RDS.  In this
case, the address of the static region must be specified to RDS in the
<tt>staticAddr</tt> parameter.

With either function, the version of RDS that the heap was built with
is compared with the version of the currently linked RDS library.  
If there is a mismatch, the error code <tt>EHEAP&lowbar;VERSION&lowbar;SKEW</tt> is returned.

Since these functions are called only to initialize the application,
RDS assumes there is no concurrent access and does no internal locking.


<sect1>Diagnostics<P>
<descrip>
<tag></tag>
<P></descrip>
<!--8 points-->
<descrip>
<tag></tag>
<P></descrip>
<descrip>
<tag>positive values,Desc</tag>
<P></descrip>


<sect1>See also<P>
<tt>rvm&lowbar;load&lowbar;segment (3)</tt>, <tt>rvm&lowbar;map (3)</tt>, <tt>rdsinit (1)</tt>


<sect1>Author<P>
David C. Steere


</manpage>
