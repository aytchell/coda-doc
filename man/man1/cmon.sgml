
<manpage TITLE="cmon" SECTNUM=1>
<mansect>NAME 
 <P>cmon - Coda server monitor




<mansect>SYNOPSIS<P>
<bf>cmon</bf>   &lsqb;<bf>-a</bf>&rsqb; &lsqb;<bf>-t</bf> probeinterval&rsqb;  server1:hz1 server2:hz2 ......<P>



<mansect>DESCRIPTION<P>
<bf>cmon</bf> probes the specified list of servers once every <em>probeinterval</em>
seconds and reports on their status.  If a server is down or unreachable,
<bf>cmon</bf> tries to reestablish contact with it once every <em>probeinterval</em>
seconds.  It uses the <em>curses (3)</em> package for screen management and
can be used on dumb terminals.  Run  <bf>cmon</bf> in a terminal emulator (like <em>xterm</em>) if you are using a window manager (like <em>X</em>).

<em>Hz1, hz2,</em> etc. are the values of the kernel constant <em>HZ</em> on the
respective servers.  This constant is different for each machine type
and denotes the number of jiffies per second.  Common values
are 64 (IBM-RT and DEC MIPS), 100 (Vax), and 50 (Sun3).  This constant is needed to
convert CPU usage (reported in jiffies by servers) to seconds.

Some <bf>cmon</bf> data can be displayed in relative or absolute modes.  In
relative mode, data is reported with reference to the interval between the
last two probes.  In absolute mode, the accumulated value since initialization
is reported.  <bf>cmon</bf> can be toggled between absolute and real modes of
presentation from the keyboard.  Typing <tt>a</tt> will cause data to be
presented in absolute mode.  Typing <tt>r</tt> will present it in relative
mode.  A mode change will only take place at the next probe.



The command-line options are:
<descrip>
<tag><bf>-a</bf></tag>Report data in absolute mode.
<P></descrip>

<descrip>
<tag><bf>-t</bf> probeinterval</tag>Probe servers every <em>probeinterval</em> seconds.  Default is 60.
<P></descrip>

<!--1 line-->
The data reported by <bf>cmon</bf> is organized under four headings: <em>TIM,</em> 
<em>CPU,</em> <em>RPC,</em> and <em>DSK.</em>  

The <em>TIM</em> data is as follows:
<descrip>
<tag><em>mon</em></tag>time at which this <bf>cmon</bf> process was created.
<P></descrip>
<descrip>
<tag><em>prob</em></tag>time at which the server was last probed.
<P></descrip>
<descrip>
<tag><em>succ</em></tag>time at which the server last responded to a probe.
<P></descrip>
<descrip>
<tag><em>up</em></tag>time at which the server process was started.
<P></descrip>
<descrip>
<tag><em>bind</em></tag>number of times contact was reestablished after a failed probe.  A probe may fail due to server or network failures.
<P></descrip>

The <em>CPU</em> data is as follows:
<descrip>
<tag><em>sys</em></tag>relative or absolute number of seconds of system CPU time used on the server.
<P></descrip>
<descrip>
<tag><em>user</em></tag>relative or absolute number of seconds of user CPU time (regular or niced) used on the server.
<P></descrip>
<descrip>
<tag><em>util</em></tag>relative or absolute number of system and user seconds divided by corresponding time of accumulation.
<P></descrip>

The <em>RPC</em> data is as follows:
<descrip>
<tag><em>conn</em></tag>number of RPC connections.
<P></descrip>
<descrip>
<tag><em>wkst</em></tag>number of workstations connected to server.  Note that each instance of <bf>cmon</bf> shows up as a workstation.
<P></descrip>
<descrip>
<tag><em>call</em></tag>relative or absolute number of RPC calls received.
<P></descrip>
<descrip>
<tag><em>pki</em></tag>relative or absolute number of RPC packets received.  Includes duplicates and other bogus packets. Also includes bulk transfer packets.
<P></descrip>
<descrip>
<tag><em>pko</em></tag>relative or absolute number of packets sent.  Includes retransmissions. Also includes bulk transfer packets.
<P></descrip>
<descrip>
<tag><em>byi</em></tag>bytes corresponding to <em>pki.</em>
<P></descrip>
<descrip>
<tag><em>byo</em></tag>bytes corresponding to <em>pko.</em>
<P></descrip>

The <em>DSK</em> data is as follows:
<descrip>
<tag><em>max1</em></tag>identity and percent usage of most full disk partition on server.  The identity is the name of mount point. Names longer than 5 characters are truncated to the first 3 characters, a &dollar; character, and the last character.
<P></descrip>
<descrip>
<tag><em>max2</em></tag>identity and percent usage of second most full disk.
<P></descrip>
<descrip>
<tag><em>max3</em></tag>identity and percent usage of third most full disk.
<P></descrip>



<mansect>DIAGNOSTICS<P>
If a server is down or unreachable, statisitics for it are reported as "???".

Relative data is undefined until two or more probes have been made.  Such
data is reported as "***" between the very first and second probes.



<mansect>BUGS<P>
Relative computations are just based on the difference between the two most
recent probes.  A smarter approach (especially for CPU utilization) would
be to use some kind of weighted history.

<!--Camelot state and chunk usage on servers should also be reported.  -->
<!--Unfortunately a bug in the Camelot node server causes crashes when --> 
<!--cmon tries to probe it.  -->

The display is optimized for maximum packing of information into a small
screen area. It may be cryptic for a novice.

No disk information is available about the root partition on a server.

Will core dump if run in a window with fewer than 25 lines.

No way to force a redisplay (eg ^L).



<mansect>SEE ALSO<P>
vutil (8), curses (3), codacon (1)



<mansect>AUTHOR<P>
M. Satyanarayanan, 1990, Created


</manpage>
